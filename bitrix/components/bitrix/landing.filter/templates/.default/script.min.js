var landingAjaxSend=false;BX.ready(function(){BX.addCustomEvent("BX.Main.Filter:apply",function(){if(landingAjaxSend){return}landingAjaxSend=true;var n=BX.create("div",{props:{className:"landing-filter-loading"}});var e=BX("workarea-content");var t=setTimeout(function(){e.appendChild(n)},100);BX.ajax({method:"POST",dataType:"html",url:landingAjaxPath,onsuccess:function(n){landingAjaxSend=false;clearTimeout(t);e.innerHTML=n}})});var n=BX("landing-create-folder");BX.bind(n,"click",function(){var e=BX.create("input",{props:{type:"text",className:"landing-filter-folder-input"}});BX.focus(e);BX.Landing.UI.Tool.ActionDialog.getInstance().show({title:n.getAttribute("title"),content:e,confirm:BX.data(n,"action")}).then(function(){BX.ajax({url:"/bitrix/tools/landing/ajax.php?action=Landing::add",method:"POST",data:{data:{fields:{TITLE:e.value,FOLDER:"Y",SITE_ID:BX.data(n,"siteId")}},sessid:BX.message("bitrix_sessid")},dataType:"json",onsuccess:function(e){if(typeof e.type!=="undefined"&&typeof e.result!=="undefined"){if(e.type==="error"){var t=BX.Landing.UI.Tool.ActionDialog.getInstance();t.show({content:e.result[0].error_description,confirm:"OK",type:"alert"}).then(function(){BX.fireEvent(n,"click")})}else{var a=BX.util.add_url_param(window.location.href,{folderId:e.result});window.location.href=a}}}})},function(n){})})});